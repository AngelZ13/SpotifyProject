@using Omadiko.Entities.Models
@{
    Layout = "~/Views/Shared/_MainLayoutPage.cshtml";
}

<div id="content-page" class="content-page fit-image" style="margin:auto; background-image: url('/Content/images/testimage.jpg'); background-attachment:fixed; background-size:cover">
    <div class="container-fluid">
        <div class="row" style="justify-content:center">
            <div class="iq-card text-center" style="margin-top:100px">
                <div class="iq-card-body border text-center rounded">
                    <table>
                        <thead>
                            <tr>
                                <th>Membership Type</th>
                                <th>Membership Price</th>
                                <th>Quantity</th>
                                <th>Sub Total</th>
                                <th>Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var subscription in (List<Subscription>)Session["Subscription"])
                            {
                                <tr>
                                    <td>@subscription.Membership.Type</td>
                                    <td>@subscription.Membership.SignUpFee</td>
                                    <td>@subscription.Quantity</td>
                                    <td>@(String.Format("{0:N0}", subscription.Membership.SignUpFee * subscription.Quantity))</td>
                                    <td>
                                        @Html.ActionLink("Delete", "Delete", "Subscription", new { id = subscription.Membership.MembershipId },
                                   new { onclick = "return confirm ('Are you sure you want to delete this item?');" })
                                </td>
                                <td><a href="~/Subscription/Delete/@subscription.Membership.MembershipId" class="btn btn-primary mt-5">Delete</a></td>
                            </tr>
                        }
                            <tr>
                                <td colspan="3">Total: </td>
                                <td>
                                    @{
                                        List<Subscription> temp = (List<Subscription>)Session["Subscription"];
                                        var total = String.Format("{0:N0}", temp.Sum(x => x.Quantity * x.Membership.SignUpFee));
                                    }

                                    @total EUR
                                </td>
                            </tr>
                        </tbody>
                        @Html.ActionLink("Checkout with Paypal", "PaymentWithPaypal", "Subscription")
                    </table>
                    <br />
                    @Html.ActionLink("Back to Premium Page", "Premium", "Main")
                </div>
            </div>
        </div>
        
    </div>
</div>
